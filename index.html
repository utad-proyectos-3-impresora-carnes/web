<!DOCTYPE html>
<html>

<head>
	<script onB>

		let serverAnswerObject = null;
		let textToPrint = null;

		function setAnswerObject() {
			serverAnswerObject = document.getElementById("serverAnswer");
			textToPrint = document.getElementById("text-to-print");
		}

		async function sendQuery(contents) {
			return fetch(`http://localhost:3000${contents}`);
		}

		async function printText() {

			const textToSend = textToPrint.value;
			fetch(`http://localhost:3000/print`, {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: JSON.stringify({ textToPrint: textToSend })
			})
				.then((result) => {
					const text = result.text();

					text.then((plainText) => {
						setServerAnswer(plainText);
					})
				})
				.catch((err) => {
					console.log(err)
				})

		}

		function setServerAnswer(newAnswer) {
			serverAnswerObject.innerHTML = newAnswer;
		}

		const askServer = (parameter) => {
			sendQuery(parameter).then((result) => {
				const text = result.text();
				text.then((plainText) => {
					setServerAnswer(plainText);
				})
			})
		}
	</script>
</head>

<body onload="setAnswerObject()">
	<div>
		<h1>Da printer!</h1>
		<p>The server says <label id="serverAnswer"></label></p>
		<textarea id="text-to-print"></textarea>
		<br />
		<button onClick="askServer('/')">/</button>
		<button onClick="askServer('/home')">/home</button>
		<button onClick="askServer('/test')">/test</button>
		<button onClick="askServer('/user')">/user</button>
		<button onClick="askServer('/render')">/render</button>
		<button onClick="printText()">print text</button>

	</div>
</body>

</html>